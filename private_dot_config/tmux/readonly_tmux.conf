# ============================================= #
# Start with defaults from the Sensible plugin  #
# --------------------------------------------- #
run-shell /nix/store/kh9anpbsa8vja2c5ghigmx4p3c3hzma9-tmuxplugin-sensible-unstable-2022-08-14/share/tmux-plugins/sensible/sensible.tmux
# ============================================= #

set  -g default-terminal "screen-256color"
set  -g base-index      1
setw -g pane-base-index 1

new-session



set -g status-keys emacs
set -g mode-keys   emacs



# rebind main key: C-a
unbind C-b
set -g prefix C-a
bind -N "Send the prefix key through to the application" \
  a send-prefix
bind C-a last-window


bind-key -N "Kill the current window" & kill-window
bind-key -N "Kill the current pane" x kill-pane


set  -g mouse             on
set  -g focus-events      off
setw -g aggressive-resize off
setw -g clock-mode-style  24
set  -s escape-time       0
set  -g history-limit     100000

# Apparently lets us pass commands to tmux without constantly pressing prefix key?
set -g repeat-time 1000

# keybindings
bind-key -T copy-mode-vi V send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"
bind Tab if-shell "test $(tmux list-panes | wc -l) -gt 1" 'select-pane -l' 'select-window -l'

# VIM mode
set -g mode-keys vi
set-option -g status-keys emacs

# Fix titlebar
set -g set-titles on
set -g set-titles-string "#T"

######################
### DESIGN CHANGES ###
######################
set -g status-right '%H:%M '
set -g status-style bg=default,fg=yellow,bright
set -g window-status-format " #W "
set -g window-status-current-format " #W "
set -g window-status-current-style \
    "#{?window_zoomed_flag,bg=yellow,bg=black,nobold}"
